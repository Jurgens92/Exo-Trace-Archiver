# Exo-Trace-Archiver Environment Configuration
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# =============================================================================
# Django Settings
# =============================================================================

# Generate a new secret key for production:
# python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=django-insecure-change-this-in-production

# Debug mode (set to False in production)
DEBUG=True

# Allowed hosts (comma-separated for multiple)
ALLOWED_HOSTS=localhost,127.0.0.1

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# Database URL (default: SQLite)
# For PostgreSQL: postgres://user:password@localhost:5432/exo_trace_archiver
DATABASE_URL=sqlite:///db.sqlite3

# =============================================================================
# Microsoft 365 / Azure AD Configuration
# =============================================================================

# Azure AD Tenant ID (Directory ID)
# Find this in Azure Portal > Azure Active Directory > Overview
MS365_TENANT_ID=your-tenant-id-here

# App Registration Client ID (Application ID)
# Find this in Azure Portal > App Registrations > Your App > Overview
MS365_CLIENT_ID=your-client-id-here

# Authentication Method: 'certificate' (recommended) or 'secret'
MS365_AUTH_METHOD=certificate

# For Client Secret authentication (less secure, not recommended for production)
# Create in Azure Portal > App Registrations > Your App > Certificates & secrets
MS365_CLIENT_SECRET=

# For Certificate authentication (recommended for unattended/service scenarios)
# Path to the certificate file (.pfx or .pem)
MS365_CERTIFICATE_PATH=/path/to/certificate.pfx

# Certificate thumbprint (required for Exchange Online PowerShell)
# Find this in Azure Portal > App Registrations > Your App > Certificates & secrets
MS365_CERTIFICATE_THUMBPRINT=ABC123...

# Certificate private key password (if password-protected)
MS365_CERTIFICATE_PASSWORD=

# API method: 'graph' (recommended, in preview) or 'powershell' (fallback)
MS365_API_METHOD=graph

# Exchange organization name (required for PowerShell auth)
# Usually your tenant name, e.g., 'contoso.onmicrosoft.com'
MS365_ORGANIZATION=yourorg.onmicrosoft.com

# =============================================================================
# Message Trace Configuration
# =============================================================================

# Default lookback period in days for daily pulls (Exchange keeps 10 days max)
MESSAGE_TRACE_LOOKBACK_DAYS=1

# Page size for API calls (max 1000 for Graph API)
MESSAGE_TRACE_PAGE_SIZE=1000

# =============================================================================
# Scheduler Configuration
# =============================================================================

# Time for daily scheduled pull (UTC)
DAILY_PULL_HOUR=1
DAILY_PULL_MINUTE=0
